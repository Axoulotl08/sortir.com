{% extends 'base.html.twig' %}
{% block body %}
    <div class="infosSortie">
        <h2>Afficher une sortie</h2>
        <div>
            {% block formStart "" %}
            <div><span>Nom de la sortie:</span>{% block nomSortie "" %}</div>
            <div><span>Date et heure de la sortie:</span>{% block dateHeureDebut "" %}</div>
            <div><span>Date limite d'inscription:</span>{% block dateLimiteInscription "" %}</div>
            <div><span>Nombre de place:</span>{% block nombreDePlace "" %}</div>
            <div><span>Dur√©e:</span>{% block duree "" %} minutes</div>
            <div><span>Description et infos:</span>{% block description "" %}</div>
        </div>
        <div>
            <div><span>campus:</span>{% block campusOrganisateur "" %}</div>
            <div><span>ville:</span>{% block villeSortie "" %}</div>
            <div><span>Lieu:</span>{% block lieuSortie "" %}
                {% if ajoutVille == 'oui' %} <button id="bouttonAjoutVille" type="button">+</button>{% endif %}
            </div>
            <div><span>Rue:</span>{% block rueSortie "" %}</div>
            <div><span>Code Postale:</span>{% block codePostalSortie "" %}</div>
            <div><span>Latitude:</span>{% block LatitudeSortie "" %}</div>
            <div><span>Longitude:</span>{% block LongitudeSortie "" %}</div>
        </div>
    </div>
    {% if ajoutVille == 'oui' %}
        <button name="validation" value="enregistrer">enregistrer</button>
        <button name="validation" value="publier">publier la sortie</button>
        {% if boutonSupprimer == 'oui' %}
            <a href="{{ path('sortie_annuler', {'id': sortie.id }) }}">
                <button type="button" name="validation" value="supprimer">supprimer la sortie</button>
            </a>
        {%  endif %}
        <a href="{{ path('sortie_liste') }}">
            <button type="button" name="validation" value="annuler">annuler</button>
        </a>
        {% block formEnd "" %}

        <div id="modal">modale</div>
    {%  else %}
        <div class="participant">
            <h3>Liste des participants inscrits</h3>
            <table>
                <thead>
                <tr>
                    <th>pseudo</th>
                    <th>nom</th>
                </tr>
                </thead>
                <tbody>

                {% for inscrit in sortie.inscrits|slice(0,sortie.nbInscriptionsMax) %}
                    <tr>
                        <td>{{ inscrit.user.username }}</td>
                        <td>{{ inscrit.prenom }} {{ inscrit.nom }}</td>
                    </tr>
                {% endfor %}

                {% for i in 1..(sortie.nbInscriptionsMax-sortie.inscrits.count)  %}
                    <tr>
                        <td></td>
                        <td></td>
                    </tr>
                {% endfor %}

                </tbody>
            </table>

        </div>
    {% endif %}



{% endblock %}

{% block title %}
    {{ parent () }}
{% endblock %}

{% block javascripts %}
    {% if ajoutVille == 'oui' %}
    <script src="{{ asset('js/gestionLieuSortie.js') }}"></script>
    {% endif %}
{% endblock %}
