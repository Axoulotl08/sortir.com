{% extends 'base.html.twig' %}

{% block title %}liste des sorties - {{ parent() }}{% endblock %}

{% block body %}

    <div class="barre_info">
        <div class="info_jour">date du jour: {{ "now"|date("d/m/Y") }}</div>
        <div class="info_user">  Participant: {{ app.user.username }}</div>
    </div>

    {# <div class="recherche">
        <form>
            <h3>Filtrer les sorties</h3>
            <div class="champRecherche">
                <label for="campusSelect">campus </label>
                <select id="CampusSelect" name="CampusSelect">
                    {% for campus in listeCampus %}
                        <option value="{{ campus.id }}">{{ campus.nom }}</option>
                    {% endfor %}
                </select>
            </div>
           <div class="champRecherche">
               <label for="seekInTitle">Le nom de la sortie contient:</label>
               <input type="text" id="seekInTitle" name="seekInTitle" placeholder="&#x1F50D; search">
           </div>
           <div class="champRecherche">
               <label for="dateDebut">Entre</label>
               <input id="dateDebut" name="dateDebut" type="date">
               <label for="dateFin">et</label>
               <input id="dateFin" name="dateFin" type="date">
           </div>
            <div class="checkboxFilter">
                <input type="checkbox">
                <input type="checkbox">
                <input type="checkbox">
                <input type="checkbox">

            </div>



        </form>
    </div>#}
    <div class="filtreSortie">
        {{ form_start(formFilter) }}
        <div class="categorieFiltre">
            <div class="champFiltre">
                {{ form_label(formFilter.campus) }}
                {{ form_widget(formFilter.campus) }}
            </div>
            <div class="champFiltre">
                {{ form_label(formFilter.titleSearch) }}
                {{ form_widget(formFilter.titleSearch) }}
            </div>
            <div class="champFiltre">
                Entre {{ form_widget(formFilter.dateIntervalDebut) }} et {{ form_widget(formFilter.dateIntervalFin) }}
            </div>
        </div>
        <div class="categorieFiltre">
            <div>
                {{ form_widget(formFilter.organisateur) }}
                {{ form_label(formFilter.organisateur) }}
            </div>
            <div>
                {{ form_widget(formFilter.estInscrit) }}
                {{ form_label(formFilter.estInscrit) }}
            </div>
            <div>
                {{ form_widget(formFilter.nEstPasInscrit) }}
                {{ form_label(formFilter.nEstPasInscrit) }}
            </div>
            <div>
                {{ form_widget(formFilter.passee) }}
                {{ form_label(formFilter.passee) }}
            </div>
        </div>
        <button class="categorieFiltre">Rechercher</button>
        {{ form_end(formFilter)}}
    </div>

    <div>
        <table class="listeSortie">
            <thead>
                <tr>
                    <th>Nom de la sortie</th>
                    <th>Date de la sortie</th>
                    <th>Clôture</th>
                    <th>Inscrits/place</th>
                    <th>État</th>
                    <th>Inscrit</th>
                    <th>Organisateur</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {%  for sortie in listSorties %}
                    <tr>
                        <th>{{ sortie.nom }}</th>
                        <th>{{ sortie.dateHeureDebut | date("d/m/Y h:i") }}</th>
                        <th>{{ sortie.dateLimiteInscription | date("d/m/Y") }}</th>
                        <th>{{ sortie.inscrits.count }}/{{ sortie.nbInscriptionsMax }}</th>
                        <th>{{ sortie.etat.libelle }}</th>
                        <th>{%  if app.user.participant in sortie.inscrits %}X{% endif %}</th>
                        <th>{{ sortie.organisateur.nom }} {{ sortie.organisateur.prenom |slice(0, 1)  }}</th>
                        <th>
                            {%  if app.user.participant is same as sortie.organisateur %}
                                {% if sortie.etat.libelle == "Créee" %}
                                    modifier - publier
                                {% else %}
                                    afficher
                                {% endif %}
                                {% if sortie.etat.libelle == "Ouverte" %}
                                    annuler
                                {% endif %}
                            {% else %}
                                afficher
                                {%  if app.user.participant in sortie.inscrits %}
                                    se desister
                                {% else %}
                                    s'inscrire
                                {% endif %}
                            {% endif %}
                        </th>
                    </tr>
                {%  endfor %}
            </tbody>
        </table>
    </div>




{%  endblock %}
